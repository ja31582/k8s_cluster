argocd repo add https://charts.jfrog.io --type helm --name jfrog #--username admin --password kaLIst01! (optional)
argocd repo list

helm repo add jfrog https://charts.jfrog.io
helm repo update

helm search repo jfrog/artifactory --versions

#sprawdź wersję i uzupełnij w application.yaml

argocd app create -f ./jfrog-artifactory/application.yaml 


argocd app get jfrog-artifactory-app
argocd app sync jfrog-artifactory-app

---
# edit rbac to allow admin access
kubectl -n argocd edit configmap argocd-rbac-cm

# update the following line under "policy.csv":
data:
  policy.default: role:admin
  policy.csv: |
    p, role:admin, applications, *, */*, allow
    g, admin, role:admin

--- # correct one versions
kubectl -n argocd get configmap argocd-rbac-cm -o yaml
apiVersion: v1
data:
  policy.csv: ""
  policy.default: ""
  policy.matchMode: glob
  scopes: '[groups]'
kind: ConfigMap
metadata:
  annotations:
    meta.helm.sh/release-name: argocd
    meta.helm.sh/release-namespace: argocd
  creationTimestamp: "2025-12-16T13:41:32Z"
  labels:
    app.kubernetes.io/component: server
    app.kubernetes.io/instance: argocd
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: argocd-rbac-cm
    app.kubernetes.io/part-of: argocd
    app.kubernetes.io/version: v3.2.1
    helm.sh/chart: argo-cd-9.1.8
  name: argocd-rbac-cm
  namespace: argocd
  resourceVersion: "1574666"
  uid: 9758ed28-7e50-4ea4-b125-d759dac82f33
jano@srv2:~/WorkDir/k8s_cluster$ kubectl -n argocd edit configmap argocd-rbac-cm
error: configmaps "argocd-rbac-cm" is invalid
A copy of your changes has been stored to "/tmp/kubectl-edit-3190091869.yaml"
error: Edit cancelled, no valid changes were saved.
jano@srv2:~/WorkDir/k8s_cluster$ kubectl -n argocd edit configmap argocd-rbac-cm
configmap/argocd-rbac-cm edited
jano@srv2:~/WorkDir/k8s_cluster$ kubectl -n argocd get configmap argocd-rbac-cm -o yaml
apiVersion: v1
data:
  policy.csv: |
    p, role:admin, applications, *, */*, allow
    g, admin, role:admin
  policy.default: role:admin
  policy.matchMode: glob
  scopes: '[groups]'
kind: ConfigMap
metadata:
  annotations:
    meta.helm.sh/release-name: argocd
    meta.helm.sh/release-namespace: argocd
  creationTimestamp: "2025-12-16T13:41:32Z"
  labels:
    app.kubernetes.io/component: server
    app.kubernetes.io/instance: argocd
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: argocd-rbac-cm
    app.kubernetes.io/part-of: argocd
    app.kubernetes.io/version: v3.2.1
    helm.sh/chart: argo-cd-9.1.8
  name: argocd-rbac-cm
  namespace: argocd
  resourceVersion: "1761525"
  uid: 9758ed28-7e50-4ea4-b125-d759dac82f33
  ---
  


